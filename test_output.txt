
[1m[46m RUN [49m[22m [36mv4.0.15 [39m[90m/home/jhontavares/Documents/Programacao/Journal-NextJs[39m

[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts
[22m[39m[dotenv@17.2.3] injecting env (7) from .env.local -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }

[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests
[22m[39mâœ… Supabase client initialized for production tests

[90mstdout[2m | src/hooks/__tests__/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould initialize dashboard with remote data (Slow Path)
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 1ms
ðŸš€ Dashboard init started
ðŸ [Batch] Total init: 10ms

[90mstdout[2m | src/hooks/__tests__/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould initialize dashboard with remote data (Slow Path)
[22m[39mðŸš€ Dashboard init started

[90mstdout[2m | src/hooks/__tests__/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould use cached account if available (Fast Path)
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms
ðŸš€ Dashboard init started
ðŸ [Batch] Total init: 2ms

[90mstdout[2m | src/hooks/__tests__/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould use cached account if available (Fast Path)
[22m[39mðŸš€ Dashboard init started

[90mstdout[2m | src/hooks/__tests__/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould handle initialization errors gracefuly
[22m[39mðŸš€ Dashboard init started

[90mstdout[2m | src/hooks/__tests__/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould handle initialization errors gracefuly
[22m[39mðŸš€ Dashboard init started

 [32mâœ“[39m src/hooks/__tests__/useMentalHub.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 364[2mms[22m[39m
 [31mâ¯[39m src/hooks/__tests__/useDashboardInit.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 170[2mms[22m[39m
[31m     [31mÃ—[31m should initialize dashboard with remote data (Slow Path)[39m[32m 94[2mms[22m[39m
     [32mâœ“[39m should use cached account if available (Fast Path)[32m 12[2mms[22m[39m
     [32mâœ“[39m should handle invalid account format[32m 5[2mms[22m[39m
     [32mâœ“[39m should handle initialization errors gracefuly[32m 56[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mQuery Performance[2m > [22m[2mshould query 100 trades in less than 2000ms
[22m[39mâœ… Query took 606.89ms (0 trades)

 [32mâœ“[39m src/__tests__/components/journal/form/LinkTradeModal.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 351[2mms[22m[39m
 [32mâœ“[39m src/components/ui/__tests__/ui-components.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[33m 319[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/HooksAndUtils.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 421[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/ui/VisualComponents.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 519[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mQuery Performance[2m > [22m[2mshould query trades by date range efficiently
[22m[39mâœ… Date range query took 337.97ms (0 trades)

 [32mâœ“[39m src/__tests__/components/laboratory/RecapFormModal.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 280[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mQuery Performance[2m > [22m[2mshould query journal entries efficiently
[22m[39mâœ… Journal entries query took 203.47ms (0 entries)

 [32mâœ“[39m src/__tests__/components/ui/UIComponents.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 605[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/ui/WeekPicker.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 724[2mms[22m[39m
       [33m[2mâœ“[22m[39m should navigate months [33m 463[2mms[22m[39m
[90mstdout[2m | src/__tests__/hooks/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould initialize dashboard data successfully
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms

[90mstdout[2m | src/__tests__/hooks/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould initialize dashboard data successfully
[22m[39mðŸ [Batch] Total init: 8ms

[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mQuery Performance[2m > [22m[2mshould query junction table efficiently
[22m[39mâœ… Junction table query took 316.93ms (0 rows)

 [32mâœ“[39m src/__tests__/hooks/useUserPermissions.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 266[2mms[22m[39m
[90mstdout[2m | src/__tests__/hooks/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould redirect if account not found (via batch)
[22m[39mðŸš€ Dashboard init started

[90mstdout[2m | src/__tests__/hooks/useDashboardInit.test.tsx[2m > [22m[2museDashboardInit[2m > [22m[2mshould handle initialization error
[22m[39mðŸš€ Dashboard init started

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould redirect if account is not found
[22m[39mðŸš€ Dashboard init started

 [32mâœ“[39m src/__tests__/components/playbook/PlaybookFormModal.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 1308[2mms[22m[39m
     [33m[2mâœ“[22m[39m shows emoji selection grid [33m 673[2mms[22m[39m
 [31mâ¯[39m src/__tests__/hooks/useDashboardInit.test.tsx [2m([22m[2m4 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 217[2mms[22m[39m
[31m     [31mÃ—[31m should initialize dashboard data successfully[39m[32m 91[2mms[22m[39m
     [32mâœ“[39m should redirect if account not found (via batch)[32m 56[2mms[22m[39m
     [32mâœ“[39m should handle initialization error[32m 61[2mms[22m[39m
     [32mâœ“[39m should not init if isValidAccount is false[32m 4[2mms[22m[39m
[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould load data successfully for valid account and respect caching
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould load data successfully for valid account and respect caching
[22m[39mðŸ [Batch] Total init: 3ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould update account balance if calculated PnL differs
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould update account balance if calculated PnL differs
[22m[39mðŸ [Batch] Total init: 4ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould calculate streak metrics correctly
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould calculate streak metrics correctly
[22m[39mðŸ [Batch] Total init: 6ms

[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mIndex Verification[2m > [22m[2mshould verify indexes exist via information_schema
[22m[39mâœ… Index verification query took 305.96ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould load admin and mentor permissions
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould load admin and mentor permissions
[22m[39mðŸ [Batch] Total init: 2ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould break streak counting on gap
[22m[39mðŸš€ Dashboard init started
âœ… Account (cached): 0ms

[90mstdout[2m | src/__tests__/hooks/useDashboardData.test.tsx[2m > [22m[2museDashboardData[2m > [22m[2mshould break streak counting on gap
[22m[39mðŸ [Batch] Total init: 4ms

 [32mâœ“[39m src/__tests__/hooks/useDashboardData.test.tsx [2m([22m[2m7 tests[22m[2m)[22m[33m 427[2mms[22m[39m
[90mstdout[2m | src/__tests__/hooks/useAuth.test.tsx[2m > [22m[2museAuth Hook[2m > [22m[2mshould handle signOut correctly
[22m[39mIniciando logout...

[90mstdout[2m | src/__tests__/hooks/useAuth.test.tsx[2m > [22m[2museAuth Hook[2m > [22m[2mshould handle signOut correctly
[22m[39mLogout bem-sucedido ou timeout alcanÃ§ado
Limpando estado e redirecionando...

 [32mâœ“[39m src/components/trades/__tests__/ConfluenceTags.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 721[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useAuth.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 219[2mms[22m[39m
 [32mâœ“[39m src/components/trades/__tests__/TradeResultBadge.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[32m 141[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/journal/form/TradeLinker.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 141[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mData Transfer Optimization[2m > [22m[2mshould return minimal data with specific select
[22m[39mâš ï¸ No trades found, skipping data transfer test

 [32mâœ“[39m src/components/trades/__tests__/useTradeValidation.test.ts [2m([22m[2m23 tests[22m[2m)[22m[32m 156[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useImageUpload.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 166[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/ratelimit.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 81[2mms[22m[39m
[90mstdout[2m | src/lib/__tests__/production-smoke.test.ts[2m > [22m[2mProduction Performance Tests[2m > [22m[2mConcurrent Operations[2m > [22m[2mshould handle multiple concurrent queries
[22m[39mâœ… 5 concurrent queries took 514.07ms

 [32mâœ“[39m src/lib/__tests__/production-smoke.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 2908[2mms[22m[39m
       [33m[2mâœ“[22m[39m should query 100 trades in less than 2000ms [33m 609[2mms[22m[39m
       [33m[2mâœ“[22m[39m should query trades by date range efficiently [33m 339[2mms[22m[39m
       [33m[2mâœ“[22m[39m should query junction table efficiently [33m 318[2mms[22m[39m
       [33m[2mâœ“[22m[39m should verify indexes exist via information_schema [33m 307[2mms[22m[39m
       [33m[2mâœ“[22m[39m should return minimal data with specific select [33m 604[2mms[22m[39m
       [33m[2mâœ“[22m[39m should handle multiple concurrent queries [33m 515[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/DashboardHeader.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 240[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/journal/form/JournalAnalysis.test.tsx [2m([22m[2m3 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/journal/form/JournalEntryForm.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 129[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useJournalForm.extended.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 127[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/ui/LayoutComponents.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[32m 163[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useImageCache.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 124[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useTradeForm.extended.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useTradeMetrics.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[32m 143[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/journal/form/EntryHeader.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 118[2mms[22m[39m
 [32mâœ“[39m src/components/trades/__tests__/RiskRewardCards.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 184[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetSentInvites[2m > [22m[2mshould return sent invites
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching sent invites'[39m,
  timestamp: [32m'2025-12-29T13:55:27.646Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'm-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetSentInvites[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching sent invites'[39m,
  timestamp: [32m'2025-12-29T13:55:27.661Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'm-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetReceivedInvites[2m > [22m[2mshould return received invites
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching received invites'[39m,
  timestamp: [32m'2025-12-29T13:55:27.674Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  menteeEmail: [32m'test@test.com'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetReceivedInvites[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching received invites'[39m,
  timestamp: [32m'2025-12-29T13:55:27.677Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  menteeEmail: [32m'test@test.com'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetMyMentors[2m > [22m[2mshould return accepted mentors
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching my mentors'[39m,
  timestamp: [32m'2025-12-29T13:55:27.681Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  menteeId: [32m'mentee-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetMyMentors[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching my mentors'[39m,
  timestamp: [32m'2025-12-29T13:55:27.683Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  menteeId: [32m'mentee-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetMentees[2m > [22m[2mshould return accepted mentees
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching mentees'[39m,
  timestamp: [32m'2025-12-29T13:55:27.685Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'mentor-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetMentees[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching mentees'[39m,
  timestamp: [32m'2025-12-29T13:55:27.686Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'mentor-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetMenteesOverview[2m > [22m[2mshould return overview with stats
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching mentees overview'[39m,
  timestamp: [32m'2025-12-29T13:55:27.688Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'mentor-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetMenteesOverview[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching mentees overview'[39m,
  timestamp: [32m'2025-12-29T13:55:27.690Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'mentor-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mcreateInvite[2m > [22m[2mshould create a new invitation
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Creating invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.691Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'm-1'[39m,
  menteeEmail: [32m't@e.com'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mcreateInvite[2m > [22m[2mshould return existing invite
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Creating invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.693Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'm-1'[39m,
  menteeEmail: [32m't@e.com'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mcreateInvite[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Creating invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.694Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  mentorId: [32m'm-1'[39m,
  menteeEmail: [32m't@e.com'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2macceptInvite[2m > [22m[2mshould accept invite
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Accepting invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.696Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  token: [32m'token'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2macceptInvite[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Accepting invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.697Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  token: [32m'token'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mrejectInvite[2m > [22m[2mshould reject invite
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Rejecting invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.701Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mrejectInvite[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Rejecting invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.703Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mrevokeInvite[2m > [22m[2mshould revoke invite
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Revoking invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.705Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mrevokeInvite[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Revoking invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.706Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mupdateInvite[2m > [22m[2mshould update invite permission
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Updating invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.708Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m,
  data: { permission: [32m'full'[39m }
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mupdateInvite[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Updating invite'[39m,
  timestamp: [32m'2025-12-29T13:55:27.708Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m,
  data: { permission: [32m'full'[39m }
}

 [32mâœ“[39m src/components/journal/__tests__/DayDetailModal.state.test.tsx [2m([22m[2m2 tests[22m[2m)[22m[32m 268[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetAccountPermissions[2m > [22m[2mshould return permissions
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching account permissions'[39m,
  timestamp: [32m'2025-12-29T13:55:27.718Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetAccountPermissions[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching account permissions'[39m,
  timestamp: [32m'2025-12-29T13:55:27.720Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2msetAccountPermission[2m > [22m[2mshould update permissions for an account
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Setting account permission'[39m,
  timestamp: [32m'2025-12-29T13:55:27.725Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m,
  accountId: [32m'acc-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mremoveAccountPermission[2m > [22m[2mshould remove permission
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Removing account permission'[39m,
  timestamp: [32m'2025-12-29T13:55:27.726Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m,
  accountId: [32m'acc-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mremoveAccountPermission[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Removing account permission'[39m,
  timestamp: [32m'2025-12-29T13:55:27.727Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  inviteId: [32m'inv-1'[39m,
  accountId: [32m'acc-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetTradeComments[2m > [22m[2mshould return comments
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching trade comments'[39m,
  timestamp: [32m'2025-12-29T13:55:27.729Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m't-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mgetTradeComments[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Fetching trade comments'[39m,
  timestamp: [32m'2025-12-29T13:55:27.730Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m't-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2maddTradeComment[2m > [22m[2mshould add a comment to a trade
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Adding trade comment'[39m,
  timestamp: [32m'2025-12-29T13:55:27.731Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m't-1'[39m,
  userId: [32m'u-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2maddTradeComment[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Adding trade comment'[39m,
  timestamp: [32m'2025-12-29T13:55:27.733Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m't-1'[39m,
  userId: [32m'u-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mdeleteTradeComment[2m > [22m[2mshould delete comment
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Deleting trade comment'[39m,
  timestamp: [32m'2025-12-29T13:55:27.734Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  commentId: [32m'c-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentorRepository.test.ts[2m > [22m[2mPrismaMentorRepository Unit Tests[2m > [22m[2mdeleteTradeComment[2m > [22m[2mshould return error on failure
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentorRepository'[39m,
  message: [32m'Deleting trade comment'[39m,
  timestamp: [32m'2025-12-29T13:55:27.735Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  commentId: [32m'c-1'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/MentorRepository.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 97[2mms[22m[39m
 [32mâœ“[39m src/components/trades/__tests__/SelectValueWithIcon.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[32m 214[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useAccountValidation.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/__tests__/components/journal/form/JournalReview.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/importParsers.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 64[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/usePlaybookMetrics.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/utils/imageCompression.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 61[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mgetMyLeaderboardStatus[2m > [22m[2mshould return status if exists
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Fetching leaderboard status'[39m,
  timestamp: [32m'2025-12-29T13:55:28.757Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'u-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mgetMyLeaderboardStatus[2m > [22m[2mshould return null if not found
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Fetching leaderboard status'[39m,
  timestamp: [32m'2025-12-29T13:55:28.767Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'u-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mjoinLeaderboard[2m > [22m[2mshould join leaderboard
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Joining leaderboard'[39m,
  timestamp: [32m'2025-12-29T13:55:28.773Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  displayName: [32m'Trader One'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mleaveLeaderboard[2m > [22m[2mshould leave leaderboard
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Leaving leaderboard'[39m,
  timestamp: [32m'2025-12-29T13:55:28.782Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'u-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mupdateLeaderboardPreferences[2m > [22m[2mshould update preferences
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Updating leaderboard preferences'[39m,
  timestamp: [32m'2025-12-29T13:55:28.783Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'u-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mgetLeaderboardOptIns[2m > [22m[2mshould return all opt-ins
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Fetching leaderboard opt-ins'[39m,
  timestamp: [32m'2025-12-29T13:55:28.788Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m
}

[90mstdout[2m | src/services/journal/__tests__/imageUpload.test.ts[2m > [22m[2mImage Upload Service[2m > [22m[2muploadJournalImages[2m > [22m[2mshould cleanup orphaned images
[22m[39m[uploadJournalImages] Deleting orphaned images: [ [32m'path/to/old_image.webp'[39m ]

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2msharePlaybook[2m > [22m[2mshould share a playbook (create)
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Sharing playbook'[39m,
  timestamp: [32m'2025-12-29T13:55:28.794Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  playbookId: [32m'pb-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2msharePlaybook[2m > [22m[2mshould update if already shared
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Sharing playbook'[39m,
  timestamp: [32m'2025-12-29T13:55:28.800Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'u-1'[39m,
  playbookId: [32m'pb-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2munsharePlaybook[2m > [22m[2mshould unshare a playbook (set is_public false)
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Unsharing playbook'[39m,
  timestamp: [32m'2025-12-29T13:55:28.801Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  playbookId: [32m'pb-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mgetPublicPlaybooks[2m > [22m[2mshould return public playbooks with stats
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Fetching public playbooks'[39m,
  timestamp: [32m'2025-12-29T13:55:28.804Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  limit: [33m20[39m,
  offset: [33m0[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mgetMySharedPlaybooks[2m > [22m[2mshould return shares
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Fetching user shared playbooks'[39m,
  timestamp: [32m'2025-12-29T13:55:28.806Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'u-1'[39m
}

 [32mâœ“[39m src/services/journal/__tests__/imageUpload.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 31[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mtogglePlaybookStar[2m > [22m[2mshould add star if not starred
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Toggling playbook star'[39m,
  timestamp: [32m'2025-12-29T13:55:28.808Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  sharedPlaybookId: [32m'shared-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mtogglePlaybookStar[2m > [22m[2mshould remove star if already starred
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Toggling playbook star'[39m,
  timestamp: [32m'2025-12-29T13:55:28.812Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  sharedPlaybookId: [32m'shared-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/CommunityRepository.test.ts[2m > [22m[2mPrismaCommunityRepository Unit Tests[2m > [22m[2mincrementPlaybookDownloads[2m > [22m[2mshould increment
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaCommunityRepository'[39m,
  message: [32m'Incrementing playbook downloads'[39m,
  timestamp: [32m'2025-12-29T13:55:28.813Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  sharedPlaybookId: [32m's-1'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/CommunityRepository.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/importService.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useDashboardActions.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 63[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mgetProfiles[2m > [22m[2mshould return profiles for user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Fetching mental profiles'[39m,
  timestamp: [32m'2025-12-29T13:55:29.049Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mgetProfiles[2m > [22m[2mshould return empty array for user with no profiles
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Fetching mental profiles'[39m,
  timestamp: [32m'2025-12-29T13:55:29.062Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-empty'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mgetProfiles[2m > [22m[2mshould handle database errors gracefully
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Fetching mental profiles'[39m,
  timestamp: [32m'2025-12-29T13:55:29.064Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mgetEntries[2m > [22m[2mshould return entries for user with limit
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Fetching mental entries'[39m,
  timestamp: [32m'2025-12-29T13:55:29.078Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  limit: [33m10[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mgetEntries[2m > [22m[2mshould use default limit of 50
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Fetching mental entries'[39m,
  timestamp: [32m'2025-12-29T13:55:29.080Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  limit: [33m50[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mcreateEntry[2m > [22m[2mshould create a new entry
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Creating mental entry'[39m,
  timestamp: [32m'2025-12-29T13:55:29.082Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mcreateEntry[2m > [22m[2mshould handle creation errors
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Creating mental entry'[39m,
  timestamp: [32m'2025-12-29T13:55:29.083Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mdeleteEntry[2m > [22m[2mshould delete an entry
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Deleting mental entry'[39m,
  timestamp: [32m'2025-12-29T13:55:29.085Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  entryId: [32m'entry-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mdeleteEntry[2m > [22m[2mshould handle deletion errors
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Deleting mental entry'[39m,
  timestamp: [32m'2025-12-29T13:55:29.089Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  entryId: [32m'invalid'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mcreateProfiles[2m > [22m[2mshould insert profiles for a user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Creating mental profiles'[39m,
  timestamp: [32m'2025-12-29T13:55:29.092Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  count: [33m1[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mcreateLog[2m > [22m[2mshould create a mental log entry
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Creating mental log'[39m,
  timestamp: [32m'2025-12-29T13:55:29.100Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  moodTag: [32m'green'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/MentalRepository.test.ts[2m > [22m[2mPrismaMentalRepository Unit Tests[2m > [22m[2mgetLogs[2m > [22m[2mshould return logs for user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaMentalRepository'[39m,
  message: [32m'Fetching mental logs'[39m,
  timestamp: [32m'2025-12-29T13:55:29.101Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  limit: [33m10[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/MentalRepository.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/utils/playbook.test.ts [2m([22m[2m34 tests[22m[2m)[22m[32m 46[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mgetUserExtended[2m > [22m[2mshould return user extended info
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Fetching user extended'[39m,
  timestamp: [32m'2025-12-29T13:55:29.217Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mgetUserExtended[2m > [22m[2mshould return error for non-existent user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Fetching user extended'[39m,
  timestamp: [32m'2025-12-29T13:55:29.233Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'non-existent'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mupdateLastLogin[2m > [22m[2mshould update last login timestamp
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Updating last login'[39m,
  timestamp: [32m'2025-12-29T13:55:29.236Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mupdateUserStatus[2m > [22m[2mshould update user status
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Updating user status'[39m,
  timestamp: [32m'2025-12-29T13:55:29.240Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  status: [32m'approved'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mupdateUserStatus[2m > [22m[2mshould set approved_at when approving
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Updating user status'[39m,
  timestamp: [32m'2025-12-29T13:55:29.241Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  status: [32m'approved'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mupdateUserRole[2m > [22m[2mshould update user role
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Updating user role'[39m,
  timestamp: [32m'2025-12-29T13:55:29.243Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  role: [32m'admin'[39m
}

 [32mâœ“[39m src/__tests__/hooks/useBlockBodyScroll.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 88[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mgetAdminStats[2m > [22m[2mshould return admin statistics
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Fetching admin stats'[39m,
  timestamp: [32m'2025-12-29T13:55:29.245Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mlogAction[2m > [22m[2mshould create an audit log entry
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Creating audit log'[39m,
  timestamp: [32m'2025-12-29T13:55:29.247Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  action: [32m'login'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mgetAuditLogs[2m > [22m[2mshould return audit logs with filters
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Fetching audit logs'[39m,
  timestamp: [32m'2025-12-29T13:55:29.248Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  limit: [33m50[39m,
  offset: [33m0[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mgetAuditLogs[2m > [22m[2mshould filter by user ID
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Fetching audit logs'[39m,
  timestamp: [32m'2025-12-29T13:55:29.251Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AdminRepository.test.ts[2m > [22m[2mPrismaAdminRepository Unit Tests[2m > [22m[2mError Handling[2m > [22m[2mshould handle database errors gracefully
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAdminRepository'[39m,
  message: [32m'Fetching user extended'[39m,
  timestamp: [32m'2025-12-29T13:55:29.253Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/AdminRepository.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 49[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useJournalForm.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 55[2mms[22m[39m
[90mstdout[2m | src/app/actions/__tests__/app_accounts.test.ts[2m > [22m[2mApp Account Actions[2m > [22m[2mgetAccountsAction[2m > [22m[2mshould fetch accounts
[22m[39m[getAccountsAction] Loading accounts for userId: user-123

[90mstdout[2m | src/app/actions/__tests__/app_accounts.test.ts[2m > [22m[2mApp Account Actions[2m > [22m[2mgetAccountsAction[2m > [22m[2mshould fetch accounts
[22m[39m[getAccountsAction] Successfully loaded accounts: [33m1[39m

 [32mâœ“[39m src/app/actions/__tests__/app_accounts.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/errorMetrics.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m src/__tests__/hooks/useError.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/calculations.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 55[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetByAccountId[2m > [22m[2mshould return trades for an account
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Fetching trades by account ID'[39m,
  timestamp: [32m'2025-12-29T13:55:30.110Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m,
  userId: [32m'user-123'[39m,
  symbol: [90mundefined[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetByAccountId[2m > [22m[2mshould return trades for an account
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trades fetched in 4ms'[39m,
  timestamp: [32m'2025-12-29T13:55:30.114Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  count: [33m2[39m,
  accountId: [32m'account-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetByAccountId[2m > [22m[2mshould handle errors
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Fetching trades by account ID'[39m,
  timestamp: [32m'2025-12-29T13:55:30.120Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m,
  userId: [32m'user-123'[39m,
  symbol: [90mundefined[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetMany[2m > [22m[2mshould return trades by ids
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Fetching many trades'[39m,
  timestamp: [32m'2025-12-29T13:55:30.131Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  options: { where: { id: [36m[Object][39m } }
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mcreate[2m > [22m[2mshould create a new trade
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Creating trade'[39m,
  timestamp: [32m'2025-12-29T13:55:30.133Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  symbol: [32m'EURUSD'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mcreate[2m > [22m[2mshould create a new trade
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trade created successfully'[39m,
  timestamp: [32m'2025-12-29T13:55:30.133Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mcreateMany[2m > [22m[2mshould create multiple trades
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Creating multiple trades'[39m,
  timestamp: [32m'2025-12-29T13:55:30.135Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  count: [33m1[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mcreateMany[2m > [22m[2mshould create multiple trades
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trades batch created successfully'[39m,
  timestamp: [32m'2025-12-29T13:55:30.135Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  count: [33m5[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mcreateWithJournal[2m > [22m[2mshould create trade and link to journal in transaction
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Creating trade with journal association'[39m,
  timestamp: [32m'2025-12-29T13:55:30.136Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  journalId: [32m'journal-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mupdate[2m > [22m[2mshould update a trade if owned by user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Updating trade'[39m,
  timestamp: [32m'2025-12-29T13:55:30.138Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mdelete[2m > [22m[2mshould delete a trade
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Deleting trade'[39m,
  timestamp: [32m'2025-12-29T13:55:30.139Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mdelete[2m > [22m[2mshould delete a trade
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trade deleted successfully'[39m,
  timestamp: [32m'2025-12-29T13:55:30.139Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mdelete[2m > [22m[2mshould return error if not found
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Deleting trade'[39m,
  timestamp: [32m'2025-12-29T13:55:30.140Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mdeleteByAccountId[2m > [22m[2mshould delete trades
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Deleting trades by account'[39m,
  timestamp: [32m'2025-12-29T13:55:30.141Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'acc-1'[39m,
  userId: [32m'user-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mdeleteByAccountId[2m > [22m[2mshould delete trades
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trades deleted successfully'[39m,
  timestamp: [32m'2025-12-29T13:55:30.141Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  count: [33m10[39m,
  accountId: [32m'acc-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetByJournalId[2m > [22m[2mshould return trades for journal
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Fetching trades by journal ID'[39m,
  timestamp: [32m'2025-12-29T13:55:30.142Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  journalId: [32m'j-1'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetDashboardMetrics[2m > [22m[2mshould aggregate trade metrics
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Dashboard metrics fetched in 0ms'[39m,
  timestamp: [32m'2025-12-29T13:55:30.144Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m,
  totalTrades: [33m10[39m,
  wins: [33m6[39m,
  losses: [33m4[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/TradeRepository.test.ts[2m > [22m[2mPrismaTradeRepository Unit Tests[2m > [22m[2mgetHistoryLite[2m > [22m[2mshould return lightweight trade history
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Fetching trade history lite'[39m,
  timestamp: [32m'2025-12-29T13:55:30.145Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m,
  userId: [32m'user-123'[39m,
  dateRange: [90mundefined[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/TradeRepository.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 47[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mgetExperiments[2m > [22m[2mshould return experiments for user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Fetching experiments'[39m,
  timestamp: [32m'2025-12-29T13:55:30.206Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mgetExperiments[2m > [22m[2mshould return empty array for user with no experiments
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Fetching experiments'[39m,
  timestamp: [32m'2025-12-29T13:55:30.216Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-empty'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mgetExperimentById[2m > [22m[2mshould return experiment by ID
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Fetching experiment'[39m,
  timestamp: [32m'2025-12-29T13:55:30.219Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  experimentId: [32m'exp-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mgetExperimentById[2m > [22m[2mshould return error if experiment not found
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Fetching experiment'[39m,
  timestamp: [32m'2025-12-29T13:55:30.221Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  experimentId: [32m'invalid'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mcreateExperiment[2m > [22m[2mshould create a new experiment
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Creating experiment'[39m,
  timestamp: [32m'2025-12-29T13:55:30.222Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  title: [32m'New Strategy'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mupdateExperiment[2m > [22m[2mshould update an experiment
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Updating experiment'[39m,
  timestamp: [32m'2025-12-29T13:55:30.224Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  experimentId: [32m'exp-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2mdeleteExperiment[2m > [22m[2mshould delete an experiment
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Deleting experiment'[39m,
  timestamp: [32m'2025-12-29T13:55:30.226Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  experimentId: [32m'exp-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mEXPERIMENTS[2m > [22m[2maddExperimentImages[2m > [22m[2mshould add images to an experiment
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Adding experiment images'[39m,
  timestamp: [32m'2025-12-29T13:55:30.228Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  experimentId: [32m'exp-123'[39m,
  count: [33m1[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mRECAPS[2m > [22m[2mgetRecaps[2m > [22m[2mshould return recaps for user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Fetching recaps'[39m,
  timestamp: [32m'2025-12-29T13:55:30.230Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mRECAPS[2m > [22m[2mcreateRecap[2m > [22m[2mshould create a new recap
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Creating recap'[39m,
  timestamp: [32m'2025-12-29T13:55:30.232Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m,
  title: [32m'New Recap'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mRECAPS[2m > [22m[2mdeleteRecap[2m > [22m[2mshould delete a recap
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Deleting recap'[39m,
  timestamp: [32m'2025-12-29T13:55:30.234Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  recapId: [32m'recap-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts[2m > [22m[2mPrismaLaboratoryRepository Unit Tests[2m > [22m[2mError Handling[2m > [22m[2mshould handle database errors gracefully
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaLaboratoryRepository'[39m,
  message: [32m'Fetching experiments'[39m,
  timestamp: [32m'2025-12-29T13:55:30.235Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/LaboratoryRepository.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 41[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/RoutineRepository.test.ts[2m > [22m[2mPrismaRoutineRepository Unit Tests[2m > [22m[2mgetByAccountId[2m > [22m[2mshould return routines for an account
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaRoutineRepository'[39m,
  message: [32m'Fetching daily routines by account'[39m,
  timestamp: [32m'2025-12-29T13:55:30.355Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/RoutineRepository.test.ts[2m > [22m[2mPrismaRoutineRepository Unit Tests[2m > [22m[2mgetByDate[2m > [22m[2mshould return routine by date
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaRoutineRepository'[39m,
  message: [32m'Fetching daily routine by date'[39m,
  timestamp: [32m'2025-12-29T13:55:30.366Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m,
  date: [32m'2024-12-20'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/RoutineRepository.test.ts[2m > [22m[2mPrismaRoutineRepository Unit Tests[2m > [22m[2msave[2m > [22m[2mshould upsert a routine
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaRoutineRepository'[39m,
  message: [32m'Saving daily routine'[39m,
  timestamp: [32m'2025-12-29T13:55:30.370Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  id: [90mundefined[39m,
  date: [32m'2024-12-20'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/RoutineRepository.test.ts[2m > [22m[2mPrismaRoutineRepository Unit Tests[2m > [22m[2mdelete[2m > [22m[2mshould delete a routine
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaRoutineRepository'[39m,
  message: [32m'Deleting daily routine'[39m,
  timestamp: [32m'2025-12-29T13:55:30.376Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  id: [32m'routine-123'[39m,
  userId: [32m'user-123'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/RoutineRepository.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/tradovateParserFull.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 39[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/AccountRepository.test.ts[2m > [22m[2mPrismaAccountRepository Unit Tests[2m > [22m[2mgetByUserId[2m > [22m[2mshould return accounts for a user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAccountRepository'[39m,
  message: [32m'Fetching accounts by user'[39m,
  timestamp: [32m'2025-12-29T13:55:30.415Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AccountRepository.test.ts[2m > [22m[2mPrismaAccountRepository Unit Tests[2m > [22m[2mgetById[2m > [22m[2mshould return account if owned by user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAccountRepository'[39m,
  message: [32m'Fetching account by ID'[39m,
  timestamp: [32m'2025-12-29T13:55:30.426Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'acc-1'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AccountRepository.test.ts[2m > [22m[2mPrismaAccountRepository Unit Tests[2m > [22m[2mgetById[2m > [22m[2mshould return not found if not owned by user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAccountRepository'[39m,
  message: [32m'Fetching account by ID'[39m,
  timestamp: [32m'2025-12-29T13:55:30.428Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'acc-1'[39m,
  userId: [32m'other-user'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AccountRepository.test.ts[2m > [22m[2mPrismaAccountRepository Unit Tests[2m > [22m[2mcreate[2m > [22m[2mshould create a new account
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAccountRepository'[39m,
  message: [32m'Creating account'[39m,
  timestamp: [32m'2025-12-29T13:55:30.430Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  name: [32m'New Account'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/AccountRepository.test.ts[2m > [22m[2mPrismaAccountRepository Unit Tests[2m > [22m[2mupdateBalance[2m > [22m[2mshould update balance if owned by user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaAccountRepository'[39m,
  message: [32m'Updating account balance'[39m,
  timestamp: [32m'2025-12-29T13:55:30.436Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'acc-1'[39m,
  userId: [32m'user-123'[39m,
  newBalance: [33m750[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/AccountRepository.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m src/lib/database/repositories/__tests__/SettingsRepository.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/mental.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 55[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/importServiceFull.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 83[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2mgetByAccountId[2m > [22m[2mshould return journal entries for an account
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaJournalRepository'[39m,
  message: [32m'Fetching journal entries by account'[39m,
  timestamp: [32m'2025-12-29T13:55:30.683Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'account-123'[39m
}

 [32mâœ“[39m src/__tests__/lib/calculations.advanced.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 19[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2msave[2m > [22m[2mshould create a new journal entry
[22m[39m[JournalRepository] Saving entry: {
  "accountId": "account-123",
  "userId": "user-123",
  "title": "Test Entry",
  "content": "Testing",
  "date": "2024-12-20"
}

[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2msave[2m > [22m[2mshould update an existing journal entry and handle trade links
[22m[39m[JournalRepository] Saving entry: {
  "id": "journal-123",
  "accountId": "account-123",
  "userId": "user-123",
  "title": "Updated Entry",
  "tradeIds": [
    "trade-1",
    "trade-2"
  ]
}

[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2msave[2m > [22m[2mshould update an existing journal entry and handle trade links
[22m[39m[JournalRepository] Linking trades: [ [32m'trade-1'[39m, [32m'trade-2'[39m ]

[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2mdelete[2m > [22m[2mshould delete a journal entry
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaJournalRepository'[39m,
  message: [32m'Deleting journal entry'[39m,
  timestamp: [32m'2025-12-29T13:55:30.712Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  id: [32m'journal-123'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2mlinkTrade[2m > [22m[2mshould link a trade
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaJournalRepository'[39m,
  message: [32m'Linking trade to journal'[39m,
  timestamp: [32m'2025-12-29T13:55:30.714Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  journalId: [32m'journal-123'[39m,
  tradeId: [32m'trade-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/JournalRepository.test.ts[2m > [22m[2mPrismaJournalRepository Unit Tests[2m > [22m[2maddImage[2m > [22m[2mshould add an image
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaJournalRepository'[39m,
  message: [32m'Adding image to journal'[39m,
  timestamp: [32m'2025-12-29T13:55:30.716Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  journalId: [32m'journal-123'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/JournalRepository.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/laboratory.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 29[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/PlaybookRepository.test.ts[2m > [22m[2mPrismaPlaybookRepository Unit Tests[2m > [22m[2mgetByUserId[2m > [22m[2mshould return playbooks for a user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaPlaybookRepository'[39m,
  message: [32m'Fetching playbooks by user'[39m,
  timestamp: [32m'2025-12-29T13:55:31.096Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/PlaybookRepository.test.ts[2m > [22m[2mPrismaPlaybookRepository Unit Tests[2m > [22m[2mcreate[2m > [22m[2mshould create a new playbook
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaPlaybookRepository'[39m,
  message: [32m'Creating playbook'[39m,
  timestamp: [32m'2025-12-29T13:55:31.107Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  name: [32m'New Strategy'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/PlaybookRepository.test.ts[2m > [22m[2mPrismaPlaybookRepository Unit Tests[2m > [22m[2mgetById[2m > [22m[2mshould return playbook if owned by user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaPlaybookRepository'[39m,
  message: [32m'Fetching playbook by ID'[39m,
  timestamp: [32m'2025-12-29T13:55:31.111Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  id: [32m'pb-1'[39m,
  userId: [32m'user-123'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/PlaybookRepository.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | src/__tests__/integration/trade-flow.test.ts[2m > [22m[2mIntegration: Trade Lifecycle Flow[2m > [22m[2mshould complete the full create -> metrics -> delete flow
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Creating trade'[39m,
  timestamp: [32m'2025-12-29T13:55:31.134Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  symbol: [32m'EURUSD'[39m
}

[90mstdout[2m | src/__tests__/integration/trade-flow.test.ts[2m > [22m[2mIntegration: Trade Lifecycle Flow[2m > [22m[2mshould complete the full create -> metrics -> delete flow
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trade created successfully'[39m,
  timestamp: [32m'2025-12-29T13:55:31.140Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-1'[39m
}

[90mstdout[2m | src/__tests__/integration/trade-flow.test.ts[2m > [22m[2mIntegration: Trade Lifecycle Flow[2m > [22m[2mshould complete the full create -> metrics -> delete flow
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Dashboard metrics fetched in 0ms'[39m,
  timestamp: [32m'2025-12-29T13:55:31.147Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  accountId: [32m'acc-1'[39m,
  totalTrades: [33m1[39m,
  wins: [33m1[39m,
  losses: [33m0[39m
}

 [32mâœ“[39m src/app/actions/__tests__/trades.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 21[2mms[22m[39m
[90mstdout[2m | src/__tests__/integration/trade-flow.test.ts[2m > [22m[2mIntegration: Trade Lifecycle Flow[2m > [22m[2mshould complete the full create -> metrics -> delete flow
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Fetching trade by ID'[39m,
  timestamp: [32m'2025-12-29T13:55:31.148Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-1'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/__tests__/integration/trade-flow.test.ts[2m > [22m[2mIntegration: Trade Lifecycle Flow[2m > [22m[2mshould complete the full create -> metrics -> delete flow
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Deleting trade'[39m,
  timestamp: [32m'2025-12-29T13:55:31.149Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-1'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/__tests__/integration/trade-flow.test.ts[2m > [22m[2mIntegration: Trade Lifecycle Flow[2m > [22m[2mshould complete the full create -> metrics -> delete flow
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaTradeRepository'[39m,
  message: [32m'Trade deleted successfully'[39m,
  timestamp: [32m'2025-12-29T13:55:31.149Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  tradeId: [32m'trade-1'[39m
}

 [32mâœ“[39m src/__tests__/integration/trade-flow.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/tradovateParser.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/utils/general.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 37[2mms[22m[39m
 [32mâœ“[39m src/__tests__/store/useLaboratoryStore.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/errorHandler.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 35[2mms[22m[39m
 [32mâœ“[39m src/lib/validation/tradeValidation.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 38[2mms[22m[39m
[90mstdout[2m | src/lib/database/repositories/__tests__/ShareRepository.test.ts[2m > [22m[2mPrismaShareRepository Unit Tests[2m > [22m[2mcreateShareLink[2m > [22m[2mshould create a new share link
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaShareRepository'[39m,
  message: [32m'Creating share link'[39m,
  timestamp: [32m'2025-12-29T13:55:31.981Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'entry-123'[39m,
  journalEntryId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/ShareRepository.test.ts[2m > [22m[2mPrismaShareRepository Unit Tests[2m > [22m[2mcreateShareLink[2m > [22m[2mshould return existing valid link
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaShareRepository'[39m,
  message: [32m'Creating share link'[39m,
  timestamp: [32m'2025-12-29T13:55:31.989Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'entry-123'[39m,
  journalEntryId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/ShareRepository.test.ts[2m > [22m[2mPrismaShareRepository Unit Tests[2m > [22m[2mgetByToken[2m > [22m[2mshould return share for valid token
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaShareRepository'[39m,
  message: [32m'Fetching shared journal by token'[39m,
  timestamp: [32m'2025-12-29T13:55:31.993Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/ShareRepository.test.ts[2m > [22m[2mPrismaShareRepository Unit Tests[2m > [22m[2mgetByToken[2m > [22m[2mshould return error for expired token
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaShareRepository'[39m,
  message: [32m'Fetching shared journal by token'[39m,
  timestamp: [32m'2025-12-29T13:55:31.995Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/ShareRepository.test.ts[2m > [22m[2mPrismaShareRepository Unit Tests[2m > [22m[2mgetUserSharedJournals[2m > [22m[2mshould return shares for a user
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaShareRepository'[39m,
  message: [32m'Fetching user shared journals'[39m,
  timestamp: [32m'2025-12-29T13:55:31.996Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  userId: [32m'user-123'[39m
}

[90mstdout[2m | src/lib/database/repositories/__tests__/ShareRepository.test.ts[2m > [22m[2mPrismaShareRepository Unit Tests[2m > [22m[2mdeleteShareLink[2m > [22m[2mshould delete a share link
[22m[39m{
  level: [32m'INFO'[39m,
  context: [32m'PrismaShareRepository'[39m,
  message: [32m'Deleting share link'[39m,
  timestamp: [32m'2025-12-29T13:55:31.999Z'[39m,
  userAgent: [32m'Mozilla/5.0 (linux) AppleWebKit/537.36 (KHTML, like Gecko) jsdom/27.3.0'[39m,
  shareId: [32m'share-123'[39m
}

 [32mâœ“[39m src/lib/database/repositories/__tests__/ShareRepository.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/lib/database/repositories/__tests__/ReviewRepository.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 29[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/analytics/tagAnalytics.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/ninjaTraderParser.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 20[2mms[22m[39m
[90mstdout[2m | src/app/actions/__tests__/admin.test.ts[2m > [22m[2mAdmin Actions[2m > [22m[2mcreateUserProfileAction[2m > [22m[2mshould create profile if not exists
[22m[39m[createUserProfileAction] Profile created for: user-123

[90mstdout[2m | src/app/actions/__tests__/admin.test.ts[2m > [22m[2mAdmin Actions[2m > [22m[2mcreateUserProfileAction[2m > [22m[2mshould return success if profile already exists
[22m[39m[createUserProfileAction] Profile already exists for: user-123

 [32mâœ“[39m src/app/actions/__tests__/admin.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/tradeHelpers.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 18[2mms[22m[39m
[90mstdout[2m | src/app/actions/__tests__/journal.test.ts[2m > [22m[2mJournal Actions[2m > [22m[2mdeleteJournalEntryAction[2m > [22m[2mshould delete entry and images
[22m[39m[deleteJournalEntryAction] Deleting 1 images from storage

 [32mâœ“[39m src/app/actions/__tests__/journal.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 22[2mms[22m[39m
[90mstdout[2m | src/__tests__/services/admin/migration.test.ts[2m > [22m[2mMigration Service[2m > [22m[2mshould migrate accounts correctly
[22m[39mðŸš€ Starting migration to Supabase...
Found 1 accounts to migrate.

[90mstdout[2m | src/__tests__/services/admin/migration.test.ts[2m > [22m[2mMigration Service[2m > [22m[2mshould migrate accounts correctly
[22m[39mFound 0 trades to migrate.
Found 0 journal entries to migrate.
Found 0 daily routines to migrate.
âœ… Migration completed successfully!

[90mstdout[2m | src/__tests__/services/admin/migration.test.ts[2m > [22m[2mMigration Service[2m > [22m[2mshould migrate trades correctly
[22m[39mðŸš€ Starting migration to Supabase...
Found 0 accounts to migrate.
Found 1 trades to migrate.

[90mstdout[2m | src/__tests__/services/admin/migration.test.ts[2m > [22m[2mMigration Service[2m > [22m[2mshould migrate trades correctly
[22m[39mFound 0 journal entries to migrate.
Found 0 daily routines to migrate.
âœ… Migration completed successfully!

[90mstdout[2m | src/__tests__/services/admin/migration.test.ts[2m > [22m[2mMigration Service[2m > [22m[2mshould migrate journal entries with images
[22m[39mðŸš€ Starting migration to Supabase...
Found 0 accounts to migrate.
Found 0 trades to migrate.
Found 1 journal entries to migrate.
Migrating images for entry entry-1...

[90mstdout[2m | src/__tests__/services/admin/migration.test.ts[2m > [22m[2mMigration Service[2m > [22m[2mshould migrate journal entries with images
[22m[39mFound 0 daily routines to migrate.
âœ… Migration completed successfully!

 [32mâœ“[39m src/__tests__/services/admin/migration.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/exportService.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/playbooks.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 47[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/tagAnalyticsService.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/mentor.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/taxService.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/reviews.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m src/lib/database/__tests__/security.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 23[2mms[22m[39m
 [32mâœ“[39m src/__tests__/schemas/schemas.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/timeframeUtils.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/routines.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/password-validator.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/community.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/mockBuilders.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m src/__tests__/laboratory/recap-journal-link.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m src/lib/database/__tests__/integration.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/trade.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/app/actions/__tests__/share.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m src/__tests__/middleware-logic.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/analytics/report.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/errors.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m src/__tests__/lib/wolfScore.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/lib/validation/__tests__/uuid.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/__tests__/proxy.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m
 [32mâœ“[39m src/__tests__/services/mentor/types.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 3[2mms[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m101 passed[39m[22m[90m (103)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1112 passed[39m[22m[90m (1114)[39m
[2m   Start at [22m 10:55:22
[2m   Duration [22m 12.36s[2m (transform 9.44s, setup 13.71s, import 30.88s, tests 14.80s, environment 90.06s)[22m

